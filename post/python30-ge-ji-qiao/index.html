<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>xiaohu</title>
<meta name="description" content="温故而知新" />
<link rel="shortcut icon" href="https://xigaohu.github.io/favicon.ico?v=1604904002135">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link href="https://cdn.remixicon.com/releases/v1.3.1/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<link rel="stylesheet" href="https://xigaohu.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="xiaohu - Atom Feed" href="https://xigaohu.github.io/atom.xml">



  </head>
  <body>
    <div id="app" class="main px-4 flex flex-col lg:flex-row">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="lg:sticky top-0">
    <div class="sidebar-content">
      <div class="flex lg:block p-4 lg:px-0 items-center fixed lg:static lg:block top-0 right-0 left-0 bg-white z-50">
        <i class="remixicon-menu-2-line lg:mt-4 text-2xl cursor-pointer animated fadeIn" onclick="openMenu()"></i>
        <a href="https://xigaohu.github.io">
          <img class="animated fadeInLeft avatar rounded-lg mx-4 lg:mt-32 lg:mx-0 mt-0 lg:w-24 lg:h-24 w-12 w-12" src="https://xigaohu.github.io/images/avatar.png?v=1604904002135" alt="">
        </a>
        <h1 class="animated fadeInLeft lg:text-4xl font-extrabold lg:mt-8 mt-0 text-xl" style="animation-delay: 0.2s">xiaohu</h1>
      </div>
      
        <div class="animated fadeInLeft" style="animation-delay: 0.4s">
          <p class="my-4 text-gray-600 font-light hidden lg:block">
            文章目录
          </p>
          <div class="toc-container hidden lg:block">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#%E7%94%A8python3">用Python3</a></li>
<li><a href="#%E6%A3%80%E6%9F%A5%E6%89%80%E9%9C%80%E7%9A%84%E6%9C%80%E5%B0%8F%E7%89%88%E6%9C%ACpython">检查所需的最小版本Python</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8ipython">使用IPython</a></li>
<li><a href="#%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BClist-comprehensions">列表推导（List Comprehensions）</a></li>
<li><a href="#%E6%A3%80%E6%9F%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5">检查对象的内存使用情况</a></li>
<li><a href="#%E8%BF%94%E5%9B%9E%E5%A4%9A%E4%B8%AA%E5%80%BC">返回多个值</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BBdata-classes">使用数据类(data classes)</a></li>
<li><a href="#%E5%8F%98%E9%87%8F%E5%8E%9F%E5%9C%B0%E4%BA%A4%E6%8D%A2">变量原地交换</a></li>
<li><a href="#%E5%90%88%E5%B9%B6%E5%AD%97%E5%85%B8python-35">合并字典(Python 3.5+)</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%A0%87%E9%A2%98%E5%86%99%E6%B3%95">字符串的标题写法</a></li>
<li><a href="#%E6%8B%86%E5%88%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%88%90list">拆分字符串转成list</a></li>
<li><a href="#%E4%BB%8Estring%E5%88%97%E8%A1%A8%E5%88%9B%E5%BB%BAstring">从string列表创建string</a></li>
<li><a href="#emoji">Emoji</a></li>
<li><a href="#%E5%88%97%E8%A1%A8%E5%88%87%E7%89%87">列表切片</a></li>
<li><a href="#%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%88%97%E8%A1%A8">反转字符串和列表</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8map">使用map()</a></li>
<li><a href="#%E4%BB%8E%E5%88%97%E8%A1%A8%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%8E%B7%E5%8F%96%E4%B8%8D%E9%87%8D%E5%A4%8D%E7%9A%84%E5%85%83%E7%B4%A0">从列表和字符串获取不重复的元素</a></li>
<li><a href="#%E5%8F%91%E7%8E%B0%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E5%85%83%E7%B4%A0">发现出现次数最多的元素</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E8%BF%9B%E5%BA%A6%E6%9D%A1">创建进度条</a></li>
<li><a href="#%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAweb%E6%9C%8D%E5%8A%A1%E5%99%A8">快速创建一个web服务器</a></li>
<li><a href="#%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2">多行字符串</a></li>
<li><a href="#%E5%B8%A6%E6%9C%89%E6%9D%A1%E4%BB%B6%E7%9A%84%E4%B8%89%E5%85%83%E6%93%8D%E4%BD%9C%E7%AC%A6">带有条件的三元操作符</a></li>
<li><a href="#%E7%BB%9F%E8%AE%A1%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0">统计出现次数</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E9%A2%9C%E8%89%B2">添加颜色</a></li>
<li><a href="#%E6%95%B4%E9%99%A4">整除</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      
    </div>
  </div>
</div>

<div class="menu-container">
  <i class="remixicon-arrow-left-line text-2xl cursor-pointer animated fadeIn close-menu-btn" onclick="closeMenu()"></i>
  <div>
    
      
        <a href="/" class="menu" style="animation-delay: 0s">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu" style="animation-delay: 0.2s">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu" style="animation-delay: 0.4s">
          标签
        </a>
      
    
      
        <a href="/post/about/" class="menu" style="animation-delay: 0.6000000000000001s">
          关于
        </a>
      
    
  </div>
  <div class="site-footer">
    <div class="py-4 text-gray-700">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></div>
    <a class="rss" href="https://xigaohu.github.io/atom.xml" target="_blank">RSS</a>
  </div>
</div>
<div class="mask" onclick="closeMenu()">
</div>
      <div class="content-wrapper py-32 lg:p-8 lg:w-3/4 post-detail animated fadeIn">
        <h1 class="text-3xl font-bold lg:mt-16">python30个技巧</h1>
        <div class="text-sm text-gray-700 lg:my-8">
          2020-01-21 / 15 min read
        </div>
        
          <img class="post-feature-image rounded-lg mx-auto my-4" src="https://tencent-1256324020.cos.ap-shanghai.myqcloud.com/20200121113726.png" alt="">
        
        <div class="post-content yue">
          <blockquote>
<p>原文 https://towardsdatascience.com/30-python-best-practices-tips-and-tricks-caefb9f8c5f5</p>
</blockquote>
<p>随着假期的过去，我们大部分人已经返回到了工作中。这里有30个Python最佳实践技巧，虽然需要花点时间，但我肯定在这过程中仍然可以学到一些有用的东西。</p>
<!-- more -->
<p>随着假期的过去，我们大部分人已经返回到了工作中。这里有30个Python最佳实践技巧，虽然需要花点时间，但我肯定在这过程中仍然可以学到一些有用的东西。</p>
<h3 id="用python3">用Python3</h3>
<p>提醒你：Python2将在2020年1月1日后，不再提供官方支持，这个向导有些例子只能用于Python3，如果你仍然在使用Python2.7，现在就升级吧。</p>
<p>如果你使用的MacOS，你可以使用Homebrew进行升级</p>
<h3 id="检查所需的最小版本python">检查所需的最小版本Python</h3>
<p>你可以在代码里检查Python的版本，确认你的用户没有使用不兼容的版本运行你的脚本，做个简单的检查</p>
<pre><code class="language-python">if not sys.version_info &gt; (2, 7):
   # berate your user for running a 10 year
   # python version
elif not sys.version_info &gt;= (3, 5):
   # Kindly tell your user (s)he needs to upgrade
   # because you're using 3.5 features
</code></pre>
<h3 id="使用ipython">使用IPython</h3>
<p>IPython是基于增强的shell，它除了自动补全，还有更多的功能，我喜欢它内置的魔术命令，下面有一些</p>
<ul>
<li><code>%cd</code> 改变当前工作目录</li>
<li><code>%edit</code> 打开编辑器，关闭编辑器后立刻执行输入的代码</li>
<li><code>%env</code> 展示当前的环境变量</li>
<li><code>%pip install [pkgs]</code> 不需要离开shell就可以安装包</li>
<li><code>%time</code> 和 <code>%timeit</code> 显示python代码的执行时间</li>
</ul>
<p>另外一个有用的特性是引用了之前输出的命令，<strong>In</strong>和<strong>Out</strong>是确切的对象，你可以使用<code>Out[3]</code>来输出第三个命令的执行结果</p>
<p>安装IPython <code>pip3 install ipython</code></p>
<h3 id="列表推导list-comprehensions">列表推导（List Comprehensions）</h3>
<p>列表推导能够代替丑陋的循环来填充list，列表推导的基础语法为</p>
<pre><code class="language-python">[ expression for item in list if conditional ]
</code></pre>
<p>一个简单的例子，给列表顺序填充数字</p>
<pre><code class="language-python">mylist = [i for i in range(10)]
print(mylist)
# [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</code></pre>
<p>因为你可以使用表达式，所以你也可以做一些数学运算</p>
<pre><code class="language-python">squares = [x**2 for x in range(10)]
print(squares)
# [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
</code></pre>
<p>甚至可以调用额外的函数</p>
<pre><code class="language-python">def some_function(a):
    return (a + 5) / 2
    
my_formula = [some_function(i) for i in range(10)]
print(my_formula)
# [2, 3, 3, 4, 4, 5, 5, 6, 6, 7]
</code></pre>
<p>最后，你可以使用<code>if</code>过滤列表，在下面例子里我们保留能被2整除的数字</p>
<pre><code class="language-python">filtered = [i for i in range(20) if i%2==0]
print(filtered)
# [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
</code></pre>
<h3 id="检查对象的内存使用情况">检查对象的内存使用情况</h3>
<p>使用<code>sys.getsizeof()</code>你可以检查某个对象的内存使用情况</p>
<pre><code class="language-python">import sys

mylist = range(0, 10000)
print(sys.getsizeof(mylist))
# 48
</code></pre>
<p>等等..为什么这么大的列表只用了48个字节</p>
<p>这是因为range函数只是返回一个表现像list的类，range比确切的数字列表有更好的内存效率</p>
<p>你可以使用列表推导来创建一个实际的数字list来查看</p>
<pre><code class="language-python">import sys

myreallist = [x for x in range(0, 10000)]
print(sys.getsizeof(myreallist))
# 87632
</code></pre>
<h3 id="返回多个值">返回多个值</h3>
<p>在Python的函数里，不需要借助字典、list或者class就可以返回多个值，例如</p>
<pre><code class="language-python">def get_user(id):
    # fetch user from database
    # ....
    return name, birthdate

name, birthdate = get_user(4)
</code></pre>
<p>返回多少值都没有关系，但是超过3个值都应该放到数据类型里面</p>
<h3 id="使用数据类data-classes">使用数据类(data classes)</h3>
<p>Python在3.7后提供了数据类，它相比于普通类有一些优点，比如返回多个值或者字典</p>
<ul>
<li>数据类代码量少</li>
<li>数据类可以比较，因为继承了<code>__eq__</code>方法</li>
<li>在调试中可以很简单的打印出一个数据类，因为<code>__repr__</code>也被继承了</li>
<li>数据类有输入提示，减少出错的机率</li>
</ul>
<p>数据类的例子</p>
<pre><code class="language-python">from dataclasses import dataclass

@dataclass
class Card:
    rank: str
    suit: str
    
card = Card(&quot;Q&quot;, &quot;hearts&quot;)

print(card == card)
# True

print(card.rank)
# 'Q'

print(card)
Card(rank='Q', suit='hearts')
</code></pre>
<h3 id="变量原地交换">变量原地交换</h3>
<p>一个小技巧，可以减少代码行数</p>
<pre><code class="language-python">a = 1
b = 2
a, b = b, a
print (a)
# 2
print (b)
# 1
</code></pre>
<h3 id="合并字典python-35">合并字典(Python 3.5+)</h3>
<p>Python3.5后，合并字典变得更简单了</p>
<pre><code class="language-python">dict1 = { 'a': 1, 'b': 2 }
dict2 = { 'b': 3, 'c': 4 }
merged = { **dict1, **dict2 }
print (merged)
# {'a': 1, 'b': 3, 'c': 4}
</code></pre>
<p>如果有重复的keys，第一个字典的key值将会被重写</p>
<h3 id="字符串的标题写法">字符串的标题写法</h3>
<p>这是语法糖的一个</p>
<pre><code class="language-python">mystring = &quot;10 awesome python tricks&quot;
print(mystring.title())
'10 Awesome Python Tricks'
</code></pre>
<h3 id="拆分字符串转成list">拆分字符串转成list</h3>
<p>你可以拆分字符串，然后转成string列表，在这个例子中，我们通过空格拆分</p>
<pre><code class="language-python">mystring = &quot;The quick brown fox&quot;
mylist = mystring.split(' ')
print(mylist)
# ['The', 'quick', 'brown', 'fox']
</code></pre>
<h3 id="从string列表创建string">从string列表创建string</h3>
<p>和前面的技巧相反，string列表中每两个string之间放空格，最终转换为一个字符串</p>
<pre><code class="language-python">mylist = ['The', 'quick', 'brown', 'fox']
mystring = &quot; &quot;.join(mylist)
print(mystring)
# 'The quick brown fox'
</code></pre>
<p>如果你在想为什么不是<code>mylist.join(&quot; &quot;)</code>，好问题！</p>
<p>这是因为<code>String.join()</code>方法不仅可以使用在list上面，也可以在任何可迭代对象上面。放在String的函数里面可以适用于多个地方。</p>
<h3 id="emoji">Emoji</h3>
<p>这一个要么令人印象深刻，要么让人排斥，取决于你怎么看待的。一个重要的事实是它可以在社交媒体分析上用到。</p>
<p>安装emoji模块</p>
<pre><code class="language-python">pip install emoji
</code></pre>
<p>安装后，你可以下面的用法</p>
<pre><code class="language-python">import emoji
result = emoji.emojize('Python is :thumbs_up:')
print(result)
# 'Python is 👍'

# You can also reverse this:
result = emoji.demojize('Python is 👍')
print(result)
# 'Python is :thumbs_up:'
</code></pre>
<h3 id="列表切片">列表切片</h3>
<p>列表切片的基础语法为</p>
<pre><code class="language-python">a[start:stop:step]
</code></pre>
<p><code>start</code>,<code>stop</code>和<code>step</code>都是可选的，如果你不填，默认为</p>
<ul>
<li>start默认为0</li>
<li>end默认为字符串的结尾位置</li>
<li>step默认为1</li>
</ul>
<p>例子</p>
<pre><code class="language-python"># We can easily create a new list from 
# the first two elements of a list:
first_two = [1, 2, 3, 4, 5][0:2]
print(first_two)
# [1, 2]

# And if we use a step value of 2, 
# we can skip over every second number
# like this:
steps = [1, 2, 3, 4, 5][0:5:2]
print(steps)
# [1, 3, 5]

# This works on strings too. In Python,
# you can treat a string like a list of
# letters:
mystring = &quot;abcdefdn nimt&quot;[::2]
print(mystring)
# 'aced it'
</code></pre>
<h3 id="反转字符串和列表">反转字符串和列表</h3>
<p>你可以使用上面说到的切片来反转字符串或者list，通过设置step成负数值-1，元素就可以被反转</p>
<pre><code class="language-python">revstring = &quot;abcdefg&quot;[::-1]
print(revstring)
# 'gfedcba'

revarray = [1, 2, 3, 4, 5][::-1]
print(revarray)
# [5, 4, 3, 2, 1]
</code></pre>
<p>###显示图片</p>
<p>我终于发现一个借口可以在我的文章里面加入猫，你可能会用它显示图形或者其他的，首先，安装Pillow，这是Python Image Library的一个fork</p>
<pre><code class="language-python">pip3 install Pillow
</code></pre>
<p>现在可以下载一个叫做kittens.jpg的图片</p>
<p>你可以使用下面的代码去显示图片</p>
<pre><code class="language-python">from PIL import Image

im = Image.open(&quot;kittens.jpg&quot;)
im.show()
print(im.format, im.size, im.mode)
# JPEG (1920, 1357) RGB
</code></pre>
<p>你也可以在IPython中使用</p>
<p>Pillow不仅可以显示图片，还可以分析，转换大小，过滤，增强，变形等等。</p>
<h3 id="使用map">使用map()</h3>
<p><code>map()</code>是Python的内建函数，<code>map()</code>的语法为</p>
<pre><code class="language-python">map(function, something_iterable)
</code></pre>
<p>所以你可以给它一个函数或者其他的去执行，它能够处理任何的可迭代对象。下面的例子里我用的list</p>
<pre><code class="language-python">def upper(s):
    return s.upper()
    
mylist = list(map(upper, ['sentence', 'fragment']))
print(mylist)
# ['SENTENCE', 'FRAGMENT']

# Convert a string representation of
# a number into a list of ints.
list_of_ints = list(map(int, &quot;1234567&quot;)))
print(list_of_ints)
# [1, 2, 3, 4, 5, 6, 7]
</code></pre>
<p>查看你的代码，看有没有什么地方可以用<code>map()</code>来替换循环</p>
<h3 id="从列表和字符串获取不重复的元素">从列表和字符串获取不重复的元素</h3>
<p>通过用<code>set()</code>创建一个集合，你能从列表或类列表对象里面得到所有的不重复元素</p>
<pre><code class="language-python">mylist = [1, 1, 2, 3, 4, 5, 5, 5, 6, 6]
print (set(mylist))
# {1, 2, 3, 4, 5, 6}

# And since a string can be treated like a 
# list of letters, you can also get the 
# unique letters from a string this way:
print (set(&quot;aaabbbcccdddeeefff&quot;))
# {'a', 'b', 'c', 'd', 'e', 'f'}
</code></pre>
<h3 id="发现出现次数最多的元素">发现出现次数最多的元素</h3>
<p>从列表和字符串发现出现次数最多的元素</p>
<pre><code class="language-python">test = [1, 2, 3, 4, 2, 2, 3, 1, 4, 4, 4]
print(max(set(test), key = test.count))
</code></pre>
<p>你理解这是怎么工作的吗？在继续阅读前尝试自己理解一下</p>
<ul>
<li><code>max()</code>将会返回list里面最大的值，<code>key</code>参数用来传入一个简单的排序函数，在这个例子里，是<code>test.count</code>，这个函数作用于可迭代对象里面的每一条目。</li>
<li><code>test.count</code>是一个列表的内置函数，它接收一个参数，然后统计这个参数的出现次数，所以<code>test.count(1)</code>将会返回2，<code>test.count</code>将会返回4</li>
<li>set(test)返回test中的所有不重复值，是{1,2,3,4}</li>
</ul>
<p>所以在这一行代码里面，我们获取test的所有不重复的值{1,2,3,4}，然后max调用<code>list.count</code>函数，返回最大的值</p>
<h3 id="创建进度条">创建进度条</h3>
<p>你可以自己创建进度条，这也很有趣，但是如果你用_progress_包的话会更快</p>
<p><code>pip3 install progress</code></p>
<p>现在你可以轻易的创建进度条</p>
<pre><code class="language-python">from progress.bar import Bar

bar = Bar('Processing', max=20)
for i in range(20):
    # Do some work
    bar.next()
bar.finish()
</code></pre>
<p>下面的动画展示了所有可用的进度条类型</p>
<figure data-type="image" tabindex="1"><img src="https://tencent-1256324020.cos.ap-shanghai.myqcloud.com/20200119175403.png" alt="" loading="lazy"></figure>
<p>###在交互界面使用下划线</p>
<p>你可以用下划线获得最近一次的执行结果，例如在IPython中：</p>
<pre><code>In [1]: 3 * 3
Out[1]: 9
In [2]: _ + 3
Out[2]: 12
</code></pre>
<p>在Python命令行里面也可以用，另外，IPython命令行允许你使用<code>Out[n]</code>去获取<code>In[n]</code>的执行结果，例如在上面的例子里，<code>Out[1]</code>将会获取到9</p>
<h3 id="快速创建一个web服务器">快速创建一个web服务器</h3>
<p>你可以创建一个web服务器，提供当前目录的内容</p>
<pre><code>python3 -m http.server
</code></pre>
<p>如果你想和同事分享东西或者测试简单的Html站点的时候，这是非常有用的</p>
<h3 id="多行字符串">多行字符串</h3>
<p>虽然在代码里你可以用三个引号将多行的字符串包起来，但是这并不理想，你放在多行字符串的所有内容包括格式化也会变成字符串。</p>
<p>我更推荐第二种方式，这可以连接多行字符串，也允许你进行格式化。唯一的缺点是你需要显式的添加换行符</p>
<pre><code class="language-python">
s1 = &quot;&quot;&quot;Multi line strings can be put
        between triple quotes. It's not ideal
        when formatting your code though&quot;&quot;&quot;

print (s1)
# Multi line strings can be put
#         between triple quotes. It's not ideal
#         when formatting your code though
        
s2 = (&quot;You can also concatenate multiple\n&quot; +
        &quot;strings this way, but you'll have to\n&quot;
        &quot;explicitly put in the newlines&quot;)

print(s2)
# You can also concatenate multiple
# strings this way, but you'll have to
# explicitly put in the newlines
</code></pre>
<h3 id="带有条件的三元操作符">带有条件的三元操作符</h3>
<p>这是另一种使你的代码更简洁的同时保持可读性的方法</p>
<pre><code class="language-python">[on_true] if [expression] else [on_false]
</code></pre>
<pre><code class="language-python">x = &quot;Success!&quot; if (y == 2) else &quot;Failed!&quot;
</code></pre>
<h3 id="统计出现次数">统计出现次数</h3>
<p>你可以使用<code>collections</code>库里面的<code>Counter</code>去统计一个列表里面的元素出现次数，这将返回一个字典</p>
<pre><code class="language-python">from collections import Counter

mylist = [1, 1, 2, 3, 4, 5, 5, 5, 6, 6]
c = Counter(mylist)
print(c)
# Counter({1: 2, 2: 1, 3: 1, 4: 1, 5: 3, 6: 2})

# And it works on strings too:
print(Counter(&quot;aaaaabbbbbccccc&quot;))
# Counter({'a': 5, 'b': 5, 'c': 5})
</code></pre>
<p>###比较链</p>
<p>你可以使用比较链来创建更简洁可读的代码</p>
<pre><code class="language-python">
x = 10

# Instead of:
if x &gt; 5 and x &lt; 15:
    print(&quot;Yes&quot;)
# yes

# You can also write:
if 5 &lt; x &lt; 15:
    print(&quot;Yes&quot;)
# Yes
</code></pre>
<h3 id="添加颜色">添加颜色</h3>
<p>使用Colorama，你可以在terminal里面添加颜色</p>
<pre><code class="language-python">from colorama import Fore, Back, Style

print(Fore.RED + 'some red text')
print(Back.GREEN + 'and with a green background')
print(Style.DIM + 'and in dim text')
print(Style.RESET_ALL)
print('back to normal now')
</code></pre>
<p>###处理日期</p>
<p>python-dateutil模块提供笔标准库更加强大的日期处理，安装：</p>
<pre><code class="language-shell">pip3 install python-dateutil 
</code></pre>
<p>你可以做很多事情，我将下面的例子限定为我发现特别有用的：log文件的模糊日期解析</p>
<pre><code class="language-python">from dateutil.parser import parse

logline = 'INFO 2020-01-01T00:00:01 Happy new year, human.'
timestamp = parse(log_line, fuzzy=True)
print(timestamp)
# 2020-01-01 00:00:01
</code></pre>
<p>记得：如果Python的datetime不行的时候，就用python-dateutil</p>
<h3 id="整除">整除</h3>
<p>在Python2里面，除法操作符<code>/</code>默认就是整除，除非有一个操作数是浮点型，如下</p>
<pre><code class="language-python"># Python 2
5 / 2 = 2
5 / 2.0 = 2.5
</code></pre>
<p>在Python3里面，除法操作符默认就是浮点除法，<code>//</code>操作符变成了整除，如下</p>
<pre><code class="language-python">Python 3
5 / 2 = 2.5
5 // 2 = 2
</code></pre>
<p>想了解这一变化的来龙去脉，你可以读<a href="https://www.python.org/dev/peps/pep-0238/">PEP-0238</a></p>
<p>###用chardet做编码检测</p>
<p>你可以使用chardet模块检测一个文件的编码格式，这是一个分析未知文本的有用方法，安装方式：</p>
<pre><code>pip install chardet
</code></pre>
<p>你现在有了一个额外的命令行工具<code>chardet</code>，你可以这样使用：</p>
<pre><code class="language-shell">chardetect somefile.txt
somefile.txt: ascii with confidence 1.0
</code></pre>
<p>你可以在编程里使用，<a href="https://chardet.readthedocs.io/en/latest/usage.html">查看文档</a></p>
<p>这就是新年开始的Python30个技巧，我希望你和我一样的喜欢它，如果你有想添加的，欢迎留言。</p>

        </div>

        


        <div class="flex justify-between py-8">
          

          
            <div class="next-post">
              <a href="https://xigaohu.github.io/post/about">
                <h3 class="post-title">
                  关于
                  <i class="remixicon-arrow-right-line"></i>
                </h3>
              </a>
            </div>
          
        </div>

        

      </div>
    </div>

    <script src="https://xigaohu.github.io/media/prism.js"></script>  
<script>

Prism.highlightAll()

let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

// This should probably be throttled.
// Especially because it triggers during smooth scrolling.
// https://lodash.com/docs/4.17.10#throttle
// You could do like...
// window.addEventListener("scroll", () => {
//    _.throttle(doThatStuff, 100);
// });
// Only not doing it here to keep this Pen dependency-free.

window.addEventListener("scroll", event => {
  let fromTop = window.scrollY;

  mainNavLinks.forEach((link, index) => {
    let section = document.getElementById(decodeURI(link.hash).substring(1));
    let nextSection = null
    if (mainNavLinks[index + 1]) {
      nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
    }
    if (section.offsetTop <= fromTop) {
      if (nextSection) {
        if (nextSection.offsetTop > fromTop) {
          link.classList.add("current");
        } else {
          link.classList.remove("current");    
        }
      } else {
        link.classList.add("current");
      }
    } else {
      link.classList.remove("current");
    }
  });
});


document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll(".post-feature-image.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target
          lazyImage.style.backgroundImage = `url(${lazyImage.dataset.bg})`
          lazyImage.classList.remove("lazy")
          lazyImageObserver.unobserve(lazyImage)
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage)
    })
  } else {
    // Possibly fall back to a more compatible method here
  }
});

const menuContainer = document.querySelector('.menu-container')
const menus = document.querySelectorAll('.menu-container .menu')
const mask = document.querySelector('.mask')
const contentWrapper = document.querySelector('.content-wrapper')
const latestArticle = document.querySelector('.latest-article')
const readMore = document.querySelector('.read-more')
const indexPage = document.querySelector('.index-page')

const isHome = location.pathname === '/'
if (latestArticle) {
  latestArticle.style.display = isHome ? 'block' : 'none'
  readMore.style.display = isHome ? 'block' : 'none'
  indexPage.style.display = isHome ? 'none' : 'block'
}

const openMenu = () => {
  menuContainer.classList.add('open')
  menus.forEach(menu => {
    menu.classList.add('animated', 'fadeInLeft')
  })
  mask.classList.add('open')
  contentWrapper.classList.add('is-second')
}

const closeMenu = () => {
  menuContainer.classList.remove('open')
  menus.forEach(menu => {
    menu.classList.remove('animated', 'fadeInLeft')
  })
  mask.classList.remove('open')
  contentWrapper.classList.remove('is-second')
}
</script>
  
  </body>
</html>
